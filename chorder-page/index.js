"use strict";(()=>{function g(n){if(n.length===1){switch(n){case" ":return"space";case",":return"comma";case"-":return"hyphen";case".":return"period"}if(n.match(/[A-Za-z]/))return n.toLowerCase()}}function y(n){let a=[];for(let e of n){let r=g(e);if(!r)return;a.push(r)}return a}var s=class{constructor(a,e,r,i,j){this.textarea=a;this.button=e;this.hiraganaChorder=r;this.katakanaChorder=i;this.keyLogger=j;this.mode="hiragana";a.addEventListener("keydown",this.handleKeyDown.bind(this)),a.addEventListener("keyup",this.handleKeyUp.bind(this)),a.addEventListener("compositionupdate",()=>{r.reset(),i.reset()}),a.addEventListener("keydown",G=>{(G.code==="ShiftLeft"||G.code==="ShiftRight")&&this.toggleMode()}),e.addEventListener("click",()=>this.toggleMode())}handleKeyDown(a){if(a.repeat)return;this.keyLogger.log({when:new Date,code:a.code,motion:"down"});let e=d(a);!e||(a.preventDefault(),this.hiraganaChorder.press(e),this.katakanaChorder.press(e))}handleKeyUp(a){if(a.repeat)return;this.keyLogger.log({when:new Date,code:a.code,motion:"up"});let e=d(a);if(!e)return;a.preventDefault();let r=this.hiraganaChorder.release(e),i=this.katakanaChorder.release(e);this.mode==="hiragana"&&r?this.insert(r):this.mode==="katakana"&&i&&this.insert(i)}insert(a){let e=this.textarea.selectionStart,r=this.textarea.selectionEnd;this.textarea.setRangeText(a,e,r);let i=e+a.length;this.textarea.setSelectionRange(i,i)}setMode(a){this.mode=a,this.button.innerHTML=l(a)}toggleMode(){this.mode==="hiragana"?this.setMode("katakana"):this.setMode("hiragana")}};function d(n){if(!(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||n.isComposing))return g(n.key)}function l(n){switch(n){case"hiragana":return"\u3042";case"katakana":return"\u30A2"}}var h=class{constructor(a,e,r){this.keyLogger=e;this.appStartTime=r;a.addEventListener("click",this.handleExportButtonClick.bind(this))}handleExportButtonClick(){f("text/csv","log.csv",this.stringifyLogsAsCsv())}stringifyLogsAsCsv(){let a=this.keyLogger.logs,e=new Array(a.length+1);e[0]="Milliseconds since page loaded,Keycode,Motion";for(let r=0;r<a.length;r++){let i=a[r],j=i.when.getTime()-this.appStartTime.getTime();e[r+1]=`${j},${i.code},${i.motion}`}return e.join(`
`)}};function f(n,a,e){let r=document.createElement("a");r.href=`data:${n};charset=UTF-8,${encodeURIComponent(e)}`,r.download=a,r.click()}var t=class{constructor(a){this.keys=w(a)}equals(a){return this.keys.length!==a.keys.length?!1:this.keys.every(e=>a.keys.includes(e))}with(a){return new t([...this.keys,a])}};function w(n){let a=[];for(let e of n)a.includes(e)||a.push(e);return a}var m=class{constructor(a){this.map=a;this.keyStates=new Map}press(a){this.keyStates.set(a,"pressed")}release(a){if(this.keyStates.get(a)==="pressed"&&(this.keyStates.set(a,"released"),[...this.keyStates].every(([e,r])=>r==="released"))){let e=k(this.keyStates);return this.keyStates.clear(),this.map.map(e)}}reset(){this.keyStates.clear()}};function k(n){return new t([...n].map(([a])=>a))}var p=[{romajis:[" "],hiragana:" ",canGeminate:!1},{romajis:["-"],hiragana:"\u30FC",canGeminate:!1},{romajis:[","],hiragana:"\u3001",canGeminate:!1},{romajis:["."],hiragana:"\u3002",canGeminate:!1},{romajis:["a"],hiragana:"\u3042",canGeminate:!1},{romajis:["i"],hiragana:"\u3044",canGeminate:!1},{romajis:["u"],hiragana:"\u3046",canGeminate:!1},{romajis:["e"],hiragana:"\u3048",canGeminate:!1},{romajis:["o"],hiragana:"\u304A",canGeminate:!1},{romajis:["ka"],hiragana:"\u304B",canGeminate:!0},{romajis:["ki"],hiragana:"\u304D",canGeminate:!0},{romajis:["ku"],hiragana:"\u304F",canGeminate:!0},{romajis:["ke"],hiragana:"\u3051",canGeminate:!0},{romajis:["ko"],hiragana:"\u3053",canGeminate:!0},{romajis:["sa"],hiragana:"\u3055",canGeminate:!0},{romajis:["si","shi"],hiragana:"\u3057",canGeminate:!0},{romajis:["su"],hiragana:"\u3059",canGeminate:!0},{romajis:["se"],hiragana:"\u305B",canGeminate:!0},{romajis:["so"],hiragana:"\u305D",canGeminate:!0},{romajis:["ta"],hiragana:"\u305F",canGeminate:!0},{romajis:["ti","chi"],hiragana:"\u3061",canGeminate:!0},{romajis:["tu","tsu"],hiragana:"\u3064",canGeminate:!0},{romajis:["te"],hiragana:"\u3066",canGeminate:!0},{romajis:["to"],hiragana:"\u3068",canGeminate:!0},{romajis:["na"],hiragana:"\u306A",canGeminate:!0},{romajis:["ni"],hiragana:"\u306B",canGeminate:!0},{romajis:["nu"],hiragana:"\u306C",canGeminate:!0},{romajis:["ne"],hiragana:"\u306D",canGeminate:!0},{romajis:["no"],hiragana:"\u306E",canGeminate:!0},{romajis:["ha"],hiragana:"\u306F",canGeminate:!0},{romajis:["hi"],hiragana:"\u3072",canGeminate:!0},{romajis:["hu","fu"],hiragana:"\u3075",canGeminate:!0},{romajis:["he"],hiragana:"\u3078",canGeminate:!0},{romajis:["ho"],hiragana:"\u307B",canGeminate:!0},{romajis:["ma"],hiragana:"\u307E",canGeminate:!0},{romajis:["mi"],hiragana:"\u307F",canGeminate:!0},{romajis:["mu"],hiragana:"\u3080",canGeminate:!0},{romajis:["me"],hiragana:"\u3081",canGeminate:!0},{romajis:["mo"],hiragana:"\u3082",canGeminate:!0},{romajis:["ya"],hiragana:"\u3084",canGeminate:!0},{romajis:["yu"],hiragana:"\u3086",canGeminate:!0},{romajis:["yo"],hiragana:"\u3088",canGeminate:!0},{romajis:["ra"],hiragana:"\u3089",canGeminate:!0},{romajis:["ri"],hiragana:"\u308A",canGeminate:!0},{romajis:["ru"],hiragana:"\u308B",canGeminate:!0},{romajis:["re"],hiragana:"\u308C",canGeminate:!0},{romajis:["ro"],hiragana:"\u308D",canGeminate:!0},{romajis:["wa"],hiragana:"\u308F",canGeminate:!0},{romajis:["wo"],hiragana:"\u3092",canGeminate:!0},{romajis:["n"],hiragana:"\u3093",canGeminate:!1},{romajis:["ga"],hiragana:"\u304C",canGeminate:!0},{romajis:["gi"],hiragana:"\u304E",canGeminate:!0},{romajis:["gu"],hiragana:"\u3050",canGeminate:!0},{romajis:["ge"],hiragana:"\u3052",canGeminate:!0},{romajis:["go"],hiragana:"\u3054",canGeminate:!0},{romajis:["za"],hiragana:"\u3056",canGeminate:!0},{romajis:["zi","ji"],hiragana:"\u3058",canGeminate:!0},{romajis:["zu"],hiragana:"\u305A",canGeminate:!0},{romajis:["ze"],hiragana:"\u305C",canGeminate:!0},{romajis:["zo"],hiragana:"\u305E",canGeminate:!0},{romajis:["da"],hiragana:"\u3060",canGeminate:!0},{romajis:["di"],hiragana:"\u3062",canGeminate:!0},{romajis:["du"],hiragana:"\u3065",canGeminate:!0},{romajis:["de"],hiragana:"\u3067",canGeminate:!0},{romajis:["do"],hiragana:"\u3069",canGeminate:!0},{romajis:["ba"],hiragana:"\u3070",canGeminate:!0},{romajis:["bi"],hiragana:"\u3073",canGeminate:!0},{romajis:["bu"],hiragana:"\u3076",canGeminate:!0},{romajis:["be"],hiragana:"\u3079",canGeminate:!0},{romajis:["bo"],hiragana:"\u307C",canGeminate:!0},{romajis:["pa"],hiragana:"\u3071",canGeminate:!0},{romajis:["pi"],hiragana:"\u3074",canGeminate:!0},{romajis:["pu"],hiragana:"\u3077",canGeminate:!0},{romajis:["pe"],hiragana:"\u307A",canGeminate:!0},{romajis:["po"],hiragana:"\u307D",canGeminate:!0},{romajis:["la","xa"],hiragana:"\u3041",canGeminate:!0},{romajis:["li","xi"],hiragana:"\u3043",canGeminate:!0},{romajis:["lu","xu"],hiragana:"\u3045",canGeminate:!0},{romajis:["le","lye","xe","xye"],hiragana:"\u3047",canGeminate:!0},{romajis:["lo","xo"],hiragana:"\u3049",canGeminate:!0},{romajis:["ltu","ltsu","xtu","xtsu"],hiragana:"\u3063",canGeminate:!0},{romajis:["lya","xya"],hiragana:"\u3083",canGeminate:!0},{romajis:["lyu","xyu"],hiragana:"\u3085",canGeminate:!0},{romajis:["lyo","xyo"],hiragana:"\u3087",canGeminate:!0},{romajis:["lwa","xwa"],hiragana:"\u308E",canGeminate:!0},{romajis:["ye"],hiragana:"\u3044\u3047",canGeminate:!0},{romajis:["wha"],hiragana:"\u3046\u3041",canGeminate:!0},{romajis:["whi","wi"],hiragana:"\u3046\u3043",canGeminate:!0},{romajis:["whe","we"],hiragana:"\u3046\u3047",canGeminate:!0},{romajis:["who"],hiragana:"\u3046\u3049",canGeminate:!0},{romajis:["wyi"],hiragana:"\u3090",canGeminate:!0},{romajis:["wye"],hiragana:"\u3091",canGeminate:!0},{romajis:["va"],hiragana:"\u3094\u3041",canGeminate:!0},{romajis:["vi"],hiragana:"\u3094\u3043",canGeminate:!0},{romajis:["vu"],hiragana:"\u3094",canGeminate:!0},{romajis:["ve"],hiragana:"\u3094\u3047",canGeminate:!0},{romajis:["vo"],hiragana:"\u3094\u3049",canGeminate:!0},{romajis:["vya"],hiragana:"\u3094\u3083",canGeminate:!0},{romajis:["vyu"],hiragana:"\u3094\u3085",canGeminate:!0},{romajis:["vyo"],hiragana:"\u3094\u3087",canGeminate:!0},{romajis:["kya"],hiragana:"\u304D\u3083",canGeminate:!0},{romajis:["kyi"],hiragana:"\u304D\u3043",canGeminate:!0},{romajis:["kyu"],hiragana:"\u304D\u3085",canGeminate:!0},{romajis:["kye"],hiragana:"\u304D\u3047",canGeminate:!0},{romajis:["kyo"],hiragana:"\u304D\u3087",canGeminate:!0},{romajis:["sya","sha"],hiragana:"\u3057\u3083",canGeminate:!0},{romajis:["syi"],hiragana:"\u3057\u3043",canGeminate:!0},{romajis:["syu","shu"],hiragana:"\u3057\u3085",canGeminate:!0},{romajis:["sye","she"],hiragana:"\u3057\u3047",canGeminate:!0},{romajis:["syo","sho"],hiragana:"\u3057\u3087",canGeminate:!0},{romajis:["swa"],hiragana:"\u3059\u3041",canGeminate:!0},{romajis:["swi"],hiragana:"\u3059\u3043",canGeminate:!0},{romajis:["swu"],hiragana:"\u3059\u3045",canGeminate:!0},{romajis:["swe"],hiragana:"\u3059\u3047",canGeminate:!0},{romajis:["swo"],hiragana:"\u3059\u3049",canGeminate:!0},{romajis:["tya","cha","cya"],hiragana:"\u3061\u3083",canGeminate:!0},{romajis:["tyi","cyi"],hiragana:"\u3061\u3043",canGeminate:!0},{romajis:["tyu","chu","cyu"],hiragana:"\u3061\u3085",canGeminate:!0},{romajis:["tye","che","cye"],hiragana:"\u3061\u3047",canGeminate:!0},{romajis:["tyo","cho","cyo"],hiragana:"\u3061\u3087",canGeminate:!0},{romajis:["tsa"],hiragana:"\u3064\u3041",canGeminate:!0},{romajis:["tsi"],hiragana:"\u3064\u3043",canGeminate:!0},{romajis:["tse"],hiragana:"\u3064\u3047",canGeminate:!0},{romajis:["tso"],hiragana:"\u3064\u3049",canGeminate:!0},{romajis:["tha"],hiragana:"\u3066\u3083",canGeminate:!0},{romajis:["thi"],hiragana:"\u3066\u3043",canGeminate:!0},{romajis:["thu"],hiragana:"\u3066\u3085",canGeminate:!0},{romajis:["the"],hiragana:"\u3066\u3047",canGeminate:!0},{romajis:["tho"],hiragana:"\u3066\u3087",canGeminate:!0},{romajis:["twa"],hiragana:"\u3068\u3041",canGeminate:!0},{romajis:["twi"],hiragana:"\u3068\u3043",canGeminate:!0},{romajis:["twu"],hiragana:"\u3068\u3045",canGeminate:!0},{romajis:["twe"],hiragana:"\u3068\u3047",canGeminate:!0},{romajis:["two"],hiragana:"\u3068\u3049",canGeminate:!0},{romajis:["nya"],hiragana:"\u306B\u3083",canGeminate:!0},{romajis:["nyi"],hiragana:"\u306B\u3043",canGeminate:!0},{romajis:["nyu"],hiragana:"\u306B\u3085",canGeminate:!0},{romajis:["nye"],hiragana:"\u306B\u3047",canGeminate:!0},{romajis:["nyo"],hiragana:"\u306B\u3087",canGeminate:!0},{romajis:["hya"],hiragana:"\u3072\u3083",canGeminate:!0},{romajis:["hyi"],hiragana:"\u3072\u3043",canGeminate:!0},{romajis:["hyu"],hiragana:"\u3072\u3085",canGeminate:!0},{romajis:["hye"],hiragana:"\u3072\u3047",canGeminate:!0},{romajis:["hyo"],hiragana:"\u3072\u3087",canGeminate:!0},{romajis:["fwa","fa","hwa"],hiragana:"\u3075\u3041",canGeminate:!0},{romajis:["fwi","fi","hwi"],hiragana:"\u3075\u3043",canGeminate:!0},{romajis:["fwu"],hiragana:"\u3075\u3045",canGeminate:!0},{romajis:["fwe","fe","hwe"],hiragana:"\u3075\u3047",canGeminate:!0},{romajis:["fwo","fo","hwo"],hiragana:"\u3075\u3049",canGeminate:!0},{romajis:["fya"],hiragana:"\u3075\u3083",canGeminate:!0},{romajis:["fyu"],hiragana:"\u3075\u3085",canGeminate:!0},{romajis:["fyo"],hiragana:"\u3075\u3087",canGeminate:!0},{romajis:["mya"],hiragana:"\u307F\u3083",canGeminate:!0},{romajis:["myi"],hiragana:"\u307F\u3043",canGeminate:!0},{romajis:["myu"],hiragana:"\u307F\u3085",canGeminate:!0},{romajis:["mye"],hiragana:"\u307F\u3047",canGeminate:!0},{romajis:["myo"],hiragana:"\u307F\u3087",canGeminate:!0},{romajis:["rya"],hiragana:"\u308A\u3083",canGeminate:!0},{romajis:["ryi"],hiragana:"\u308A\u3043",canGeminate:!0},{romajis:["ryu"],hiragana:"\u308A\u3085",canGeminate:!0},{romajis:["rye"],hiragana:"\u308A\u3047",canGeminate:!0},{romajis:["ryo"],hiragana:"\u308A\u3087",canGeminate:!0},{romajis:["gya"],hiragana:"\u304E\u3083",canGeminate:!0},{romajis:["gyi"],hiragana:"\u304E\u3043",canGeminate:!0},{romajis:["gyu"],hiragana:"\u304E\u3085",canGeminate:!0},{romajis:["gye"],hiragana:"\u304E\u3047",canGeminate:!0},{romajis:["gyo"],hiragana:"\u304E\u3087",canGeminate:!0},{romajis:["kwa","qa"],hiragana:"\u304F\u3041",canGeminate:!0},{romajis:["kwi","qi","qwi","qyi"],hiragana:"\u304F\u3043",canGeminate:!0},{romajis:["kwu","qu","qwu"],hiragana:"\u304F\u3045",canGeminate:!0},{romajis:["kwe","qe","qwe","qye"],hiragana:"\u304F\u3047",canGeminate:!0},{romajis:["kwo","qo","qwo"],hiragana:"\u304F\u3049",canGeminate:!0},{romajis:["qwa"],hiragana:"\u304F\u308E",canGeminate:!0},{romajis:["qya"],hiragana:"\u304F\u3083",canGeminate:!0},{romajis:["qyu"],hiragana:"\u304F\u3085",canGeminate:!0},{romajis:["qyo"],hiragana:"\u304F\u3087",canGeminate:!0},{romajis:["gwa"],hiragana:"\u3050\u3041",canGeminate:!0},{romajis:["gwi"],hiragana:"\u3050\u3043",canGeminate:!0},{romajis:["gwu"],hiragana:"\u3050\u3045",canGeminate:!0},{romajis:["gwe"],hiragana:"\u3050\u3047",canGeminate:!0},{romajis:["gwo"],hiragana:"\u3050\u3049",canGeminate:!0},{romajis:["zya","jya","ja"],hiragana:"\u3058\u3083",canGeminate:!0},{romajis:["zyi","jyi"],hiragana:"\u3058\u3043",canGeminate:!0},{romajis:["zyu","jyu","ju"],hiragana:"\u3058\u3085",canGeminate:!0},{romajis:["zye","jye","je"],hiragana:"\u3058\u3047",canGeminate:!0},{romajis:["zyo","jyo","jo"],hiragana:"\u3058\u3087",canGeminate:!0},{romajis:["dya"],hiragana:"\u3062\u3083",canGeminate:!0},{romajis:["dyi"],hiragana:"\u3062\u3043",canGeminate:!0},{romajis:["dyu"],hiragana:"\u3062\u3085",canGeminate:!0},{romajis:["dye"],hiragana:"\u3062\u3047",canGeminate:!0},{romajis:["dyo"],hiragana:"\u3062\u3087",canGeminate:!0},{romajis:["dha"],hiragana:"\u3067\u3083",canGeminate:!0},{romajis:["dhi"],hiragana:"\u3067\u3043",canGeminate:!0},{romajis:["dhu"],hiragana:"\u3067\u3085",canGeminate:!0},{romajis:["dhe"],hiragana:"\u3067\u3047",canGeminate:!0},{romajis:["dho"],hiragana:"\u3067\u3087",canGeminate:!0},{romajis:["dwa"],hiragana:"\u3069\u3041",canGeminate:!0},{romajis:["dwi"],hiragana:"\u3069\u3043",canGeminate:!0},{romajis:["dwu"],hiragana:"\u3069\u3045",canGeminate:!0},{romajis:["dwe"],hiragana:"\u3069\u3047",canGeminate:!0},{romajis:["dwo"],hiragana:"\u3069\u3049",canGeminate:!0},{romajis:["bya"],hiragana:"\u3073\u3083",canGeminate:!0},{romajis:["byi"],hiragana:"\u3073\u3043",canGeminate:!0},{romajis:["byu"],hiragana:"\u3073\u3085",canGeminate:!0},{romajis:["bye"],hiragana:"\u3073\u3047",canGeminate:!0},{romajis:["byo"],hiragana:"\u3073\u3087",canGeminate:!0},{romajis:["pya"],hiragana:"\u3074\u3083",canGeminate:!0},{romajis:["pyi"],hiragana:"\u3074\u3043",canGeminate:!0},{romajis:["pyu"],hiragana:"\u3074\u3085",canGeminate:!0},{romajis:["pye"],hiragana:"\u3074\u3047",canGeminate:!0},{romajis:["pyo"],hiragana:"\u3074\u3087",canGeminate:!0}];var v=p.flatMap(({romajis:n,hiragana:a,canGeminate:e})=>n.map(r=>y(r)).filter(r=>!!r).map(r=>new t(r)).flatMap(r=>e?[{chord:r,hiragana:a},{chord:r.with("space"),hiragana:"\u3063"+a}]:[{chord:r,hiragana:a}])),o=class{map(a){let e=x(a);return e?e.hiragana:""}};function x(n){return v.find(a=>a.chord.equals(n))}var M=new o,c=class{map(a){return C(M.map(a))}};function C(n){return[...n].map(a=>{var r;let e=(r=a.codePointAt(0))!=null?r:0;return 12353<=e&&e<=12438?e+96:e}).map(a=>String.fromCodePoint(a)).join("")}var u=class{constructor(){this.logs=[]}log(a){this.logs.push(a)}};function L(){let n=document.querySelector("#editor"),a=document.querySelector("#mode"),e=document.querySelector("#export");if(!(n instanceof HTMLTextAreaElement&&a instanceof HTMLButtonElement&&e instanceof HTMLButtonElement))throw new Error("Mismatch between expected and actual element tag names");let r=new u;new s(n,a,new m(new o),new m(new c),r),new h(e,r,new Date)}L();})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2RvbWFpbi9rZXkvS2V5LnRzIiwgIi4uL3NyYy9jb250cm9sbGVyL0VkaXRvci50cyIsICIuLi9zcmMvY29udHJvbGxlci9Mb2dFeHBvcnRlci50cyIsICIuLi9zcmMvZG9tYWluL2Nob3JkL0Nob3JkLnRzIiwgIi4uL3NyYy9kb21haW4vY2hvcmQvQ2hvcmRlci50cyIsICIuLi9zcmMvZG9tYWluL2Nob3JkL0hpcmFnYW5hQ2hvcmRNYXAudHMiLCAiLi4vc3JjL2RvbWFpbi9jaG9yZC9LYXRha2FuYUNob3JkTWFwLnRzIiwgIi4uL3NyYy9kb21haW4va2V5L0tleUxvZ2dlci50cyIsICIuLi9zcmMvaW5kZXgudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCB0eXBlIEtleSA9XG4gIHwgXCJzcGFjZVwiXG4gIHwgXCJjb21tYVwiXG4gIHwgXCJoeXBoZW5cIlxuICB8IFwicGVyaW9kXCJcbiAgfCBcImFcIlxuICB8IFwiYlwiXG4gIHwgXCJjXCJcbiAgfCBcImRcIlxuICB8IFwiZVwiXG4gIHwgXCJmXCJcbiAgfCBcImdcIlxuICB8IFwiaFwiXG4gIHwgXCJpXCJcbiAgfCBcImpcIlxuICB8IFwia1wiXG4gIHwgXCJsXCJcbiAgfCBcIm1cIlxuICB8IFwiblwiXG4gIHwgXCJvXCJcbiAgfCBcInBcIlxuICB8IFwicVwiXG4gIHwgXCJyXCJcbiAgfCBcInNcIlxuICB8IFwidFwiXG4gIHwgXCJ1XCJcbiAgfCBcInZcIlxuICB8IFwid1wiXG4gIHwgXCJ4XCJcbiAgfCBcInlcIlxuICB8IFwielwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydENoYXJUb0tleShjaGFyOiBzdHJpbmcpOiBLZXkgfCB1bmRlZmluZWQge1xuICBpZiAoY2hhci5sZW5ndGggIT09IDEpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGNoYXIpIHtcbiAgICBjYXNlIFwiIFwiOlxuICAgICAgcmV0dXJuIFwic3BhY2VcIjtcbiAgICBjYXNlIFwiLFwiOlxuICAgICAgcmV0dXJuIFwiY29tbWFcIjtcbiAgICBjYXNlIFwiLVwiOlxuICAgICAgcmV0dXJuIFwiaHlwaGVuXCI7XG4gICAgY2FzZSBcIi5cIjpcbiAgICAgIHJldHVybiBcInBlcmlvZFwiO1xuICB9XG5cbiAgaWYgKGNoYXIubWF0Y2goL1tBLVphLXpdLykpIHtcbiAgICByZXR1cm4gY2hhci50b0xvd2VyQ2FzZSgpIGFzIEtleTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFN0cmluZ1RvS2V5cyhzdHJpbmc6IHN0cmluZykge1xuICBjb25zdCBrZXlzOiBLZXlbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgY2hhciBvZiBzdHJpbmcpIHtcbiAgICBjb25zdCBrZXkgPSBjb252ZXJ0Q2hhclRvS2V5KGNoYXIpO1xuICAgIGlmICgha2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGtleXMucHVzaChrZXkpO1xuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59XG4iLCAiaW1wb3J0IHsgQ2hvcmRlciB9IGZyb20gXCIuLi9kb21haW4vY2hvcmQvQ2hvcmRlclwiO1xuaW1wb3J0IHsgY29udmVydENoYXJUb0tleSB9IGZyb20gXCIuLi9kb21haW4va2V5L0tleVwiO1xuaW1wb3J0IHsgS2V5TG9nZ2VyIH0gZnJvbSBcIi4uL2RvbWFpbi9rZXkvS2V5TG9nZ2VyXCI7XG5cbnR5cGUgTW9kZSA9IFwiaGlyYWdhbmFcIiB8IFwia2F0YWthbmFcIjtcblxuZXhwb3J0IGNsYXNzIEVkaXRvciB7XG4gIHByaXZhdGUgbW9kZTogTW9kZSA9IFwiaGlyYWdhbmFcIjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhpcmFnYW5hQ2hvcmRlcjogQ2hvcmRlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGthdGFrYW5hQ2hvcmRlcjogQ2hvcmRlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGtleUxvZ2dlcjogS2V5TG9nZ2VyXG4gICkge1xuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpKTtcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpKTtcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwiY29tcG9zaXRpb251cGRhdGVcIiwgKCkgPT4ge1xuICAgICAgaGlyYWdhbmFDaG9yZGVyLnJlc2V0KCk7XG4gICAgICBrYXRha2FuYUNob3JkZXIucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS5jb2RlID09PSBcIlNoaWZ0TGVmdFwiIHx8IGUuY29kZSA9PT0gXCJTaGlmdFJpZ2h0XCIpIHtcbiAgICAgICAgdGhpcy50b2dnbGVNb2RlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnRvZ2dsZU1vZGUoKSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQucmVwZWF0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5rZXlMb2dnZXIubG9nKHtcbiAgICAgIHdoZW46IG5ldyBEYXRlKCksXG4gICAgICBjb2RlOiBldmVudC5jb2RlLFxuICAgICAgbW90aW9uOiBcImRvd25cIixcbiAgICB9KTtcblxuICAgIGNvbnN0IGtleSA9IGNvbnZlcnRLZXlib2FyZEV2ZW50VG9LZXkoZXZlbnQpO1xuICAgIGlmICgha2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuaGlyYWdhbmFDaG9yZGVyLnByZXNzKGtleSk7XG4gICAgdGhpcy5rYXRha2FuYUNob3JkZXIucHJlc3Moa2V5KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQucmVwZWF0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5rZXlMb2dnZXIubG9nKHtcbiAgICAgIHdoZW46IG5ldyBEYXRlKCksXG4gICAgICBjb2RlOiBldmVudC5jb2RlLFxuICAgICAgbW90aW9uOiBcInVwXCIsXG4gICAgfSk7XG5cbiAgICBjb25zdCBrZXkgPSBjb252ZXJ0S2V5Ym9hcmRFdmVudFRvS2V5KGV2ZW50KTtcbiAgICBpZiAoIWtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBoaXJhZ2FuYSA9IHRoaXMuaGlyYWdhbmFDaG9yZGVyLnJlbGVhc2Uoa2V5KTtcbiAgICBjb25zdCBrYXRha2FuYSA9IHRoaXMua2F0YWthbmFDaG9yZGVyLnJlbGVhc2Uoa2V5KTtcblxuICAgIGlmICh0aGlzLm1vZGUgPT09IFwiaGlyYWdhbmFcIiAmJiBoaXJhZ2FuYSkge1xuICAgICAgdGhpcy5pbnNlcnQoaGlyYWdhbmEpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSBcImthdGFrYW5hXCIgJiYga2F0YWthbmEpIHtcbiAgICAgIHRoaXMuaW5zZXJ0KGthdGFrYW5hKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluc2VydCh0ZXh0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9IHRoaXMudGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3Qgc2VsZWN0aW9uRW5kID0gdGhpcy50ZXh0YXJlYS5zZWxlY3Rpb25FbmQ7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRSYW5nZVRleHQodGV4dCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7XG5cbiAgICBjb25zdCBzZWxlY3Rpb25Qb3NpdGlvbiA9IHNlbGVjdGlvblN0YXJ0ICsgdGV4dC5sZW5ndGg7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25Qb3NpdGlvbiwgc2VsZWN0aW9uUG9zaXRpb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRNb2RlKG1vZGU6IE1vZGUpIHtcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IGNvbnZlcnRNb2RlVG9TeW1ib2wobW9kZSk7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZU1vZGUoKSB7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gXCJoaXJhZ2FuYVwiKSB7XG4gICAgICB0aGlzLnNldE1vZGUoXCJrYXRha2FuYVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRNb2RlKFwiaGlyYWdhbmFcIik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRLZXlib2FyZEV2ZW50VG9LZXkoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgaWYgKFxuICAgIGV2ZW50LmFsdEtleSB8fFxuICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgZXZlbnQuc2hpZnRLZXkgfHxcbiAgICBldmVudC5pc0NvbXBvc2luZ1xuICApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGSVhNRTogZG8gbm90IHJlbHkgb24gZXZlbnQua2V5XG4gIHJldHVybiBjb252ZXJ0Q2hhclRvS2V5KGV2ZW50LmtleSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRNb2RlVG9TeW1ib2wobW9kZTogTW9kZSkge1xuICBzd2l0Y2ggKG1vZGUpIHtcbiAgICBjYXNlIFwiaGlyYWdhbmFcIjpcbiAgICAgIHJldHVybiBcIlx1MzA0MlwiO1xuICAgIGNhc2UgXCJrYXRha2FuYVwiOlxuICAgICAgcmV0dXJuIFwiXHUzMEEyXCI7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBLZXlMb2dnZXIgfSBmcm9tIFwiLi4vZG9tYWluL2tleS9LZXlMb2dnZXJcIjtcblxuZXhwb3J0IGNsYXNzIExvZ0V4cG9ydGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZXhwb3J0QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGtleUxvZ2dlcjogS2V5TG9nZ2VyLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgYXBwU3RhcnRUaW1lOiBEYXRlXG4gICkge1xuICAgIGV4cG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5oYW5kbGVFeHBvcnRCdXR0b25DbGljay5iaW5kKHRoaXMpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRXhwb3J0QnV0dG9uQ2xpY2soKSB7XG4gICAgZG93bmxvYWRTdHJpbmdBc0ZpbGUoXCJ0ZXh0L2NzdlwiLCBcImxvZy5jc3ZcIiwgdGhpcy5zdHJpbmdpZnlMb2dzQXNDc3YoKSk7XG4gIH1cblxuICBwcml2YXRlIHN0cmluZ2lmeUxvZ3NBc0NzdigpIHtcbiAgICBjb25zdCBsb2dzID0gdGhpcy5rZXlMb2dnZXIubG9ncztcbiAgICBjb25zdCByb3dzID0gbmV3IEFycmF5PHN0cmluZz4obG9ncy5sZW5ndGggKyAxKTtcbiAgICByb3dzWzBdID0gXCJNaWxsaXNlY29uZHMgc2luY2UgcGFnZSBsb2FkZWQsS2V5Y29kZSxNb3Rpb25cIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxvZyA9IGxvZ3NbaV07XG4gICAgICBjb25zdCB0aW1lID0gbG9nLndoZW4uZ2V0VGltZSgpIC0gdGhpcy5hcHBTdGFydFRpbWUuZ2V0VGltZSgpO1xuICAgICAgcm93c1tpICsgMV0gPSBgJHt0aW1lfSwke2xvZy5jb2RlfSwke2xvZy5tb3Rpb259YDtcbiAgICB9XG4gICAgcmV0dXJuIHJvd3Muam9pbihcIlxcblwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkb3dubG9hZFN0cmluZ0FzRmlsZShcbiAgbWltZVR5cGU6IHN0cmluZyxcbiAgZmlsZW5hbWU6IHN0cmluZyxcbiAgY29udGVudDogc3RyaW5nXG4pIHtcbiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICBhLmhyZWYgPSBgZGF0YToke21pbWVUeXBlfTtjaGFyc2V0PVVURi04LCR7ZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnQpfWA7XG4gIGEuZG93bmxvYWQgPSBmaWxlbmFtZTtcbiAgYS5jbGljaygpO1xufVxuIiwgImltcG9ydCB7IEtleSB9IGZyb20gXCIuLi9rZXkvS2V5XCI7XG5cbmV4cG9ydCBjbGFzcyBDaG9yZCB7XG4gIHByaXZhdGUgcmVhZG9ubHkga2V5czogS2V5W107XG5cbiAgY29uc3RydWN0b3Ioa2V5czogS2V5W10pIHtcbiAgICB0aGlzLmtleXMgPSBkZWR1cGUoa2V5cyk7XG4gIH1cblxuICBlcXVhbHMoY2hvcmQ6IENob3JkKSB7XG4gICAgaWYgKHRoaXMua2V5cy5sZW5ndGggIT09IGNob3JkLmtleXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMua2V5cy5ldmVyeSgoa2V5KSA9PiBjaG9yZC5rZXlzLmluY2x1ZGVzKGtleSkpO1xuICB9XG5cbiAgd2l0aChrZXk6IEtleSkge1xuICAgIHJldHVybiBuZXcgQ2hvcmQoWy4uLnRoaXMua2V5cywga2V5XSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVkdXBlKGtleXM6IEtleVtdKSB7XG4gIGNvbnN0IHJlc3VsdDogS2V5W10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgaWYgKCFyZXN1bHQuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwgImltcG9ydCB7IEtleSB9IGZyb20gXCIuLi9rZXkvS2V5XCI7XG5pbXBvcnQgeyBDaG9yZCB9IGZyb20gXCIuL0Nob3JkXCI7XG5pbXBvcnQgeyBDaG9yZE1hcCB9IGZyb20gXCIuL0Nob3JkTWFwXCI7XG5cbnR5cGUgS2V5U3RhdGUgPSBcInByZXNzZWRcIiB8IFwicmVsZWFzZWRcIjtcblxuZXhwb3J0IGNsYXNzIENob3JkZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IGtleVN0YXRlcyA9IG5ldyBNYXA8S2V5LCBLZXlTdGF0ZT4oKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IG1hcDogQ2hvcmRNYXApIHt9XG5cbiAgcHJlc3Moa2V5OiBLZXkpIHtcbiAgICB0aGlzLmtleVN0YXRlcy5zZXQoa2V5LCBcInByZXNzZWRcIik7XG4gIH1cblxuICByZWxlYXNlKGtleTogS2V5KSB7XG4gICAgLy8gVE9ETzogaXQncyBhIGJpdCBhd2t3YXJkIHRvIG1hbmFnZSB0aGUgc3RhdGVzIG9mIHRoZSBrZXlzIGhlcmVcbiAgICBpZiAodGhpcy5rZXlTdGF0ZXMuZ2V0KGtleSkgIT09IFwicHJlc3NlZFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5rZXlTdGF0ZXMuc2V0KGtleSwgXCJyZWxlYXNlZFwiKTtcblxuICAgIGlmIChbLi4udGhpcy5rZXlTdGF0ZXNdLmV2ZXJ5KChbXywgc3RhdGVdKSA9PiBzdGF0ZSA9PT0gXCJyZWxlYXNlZFwiKSkge1xuICAgICAgY29uc3QgY2hvcmQgPSBjb252ZXJ0S2V5U3RhdGVzVG9DaG9yZCh0aGlzLmtleVN0YXRlcyk7XG4gICAgICB0aGlzLmtleVN0YXRlcy5jbGVhcigpO1xuICAgICAgcmV0dXJuIHRoaXMubWFwLm1hcChjaG9yZCk7XG4gICAgfVxuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5rZXlTdGF0ZXMuY2xlYXIoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0S2V5U3RhdGVzVG9DaG9yZChrZXlTdGF0ZXM6IE1hcDxLZXksIEtleVN0YXRlPikge1xuICByZXR1cm4gbmV3IENob3JkKFsuLi5rZXlTdGF0ZXNdLm1hcCgoW2tleV0pID0+IGtleSkpO1xufVxuIiwgImltcG9ydCB7IGNvbnZlcnRTdHJpbmdUb0tleXMsIEtleSB9IGZyb20gXCIuLi9rZXkvS2V5XCI7XG5pbXBvcnQgeyBDaG9yZCB9IGZyb20gXCIuL0Nob3JkXCI7XG5pbXBvcnQgeyBDaG9yZE1hcCB9IGZyb20gXCIuL0Nob3JkTWFwXCI7XG5pbXBvcnQgY29udmVyc2lvbnMgZnJvbSBcIi4vSGlyYWdhbmFDaG9yZE1hcC5qc29uXCI7XG5cbmNvbnN0IG1hcHBpbmdzID0gY29udmVyc2lvbnMuZmxhdE1hcCgoeyByb21hamlzLCBoaXJhZ2FuYSwgY2FuR2VtaW5hdGUgfSkgPT5cbiAgcm9tYWppc1xuICAgIC5tYXAoKGUpID0+IGNvbnZlcnRTdHJpbmdUb0tleXMoZSkpXG4gICAgLmZpbHRlcigoZSk6IGUgaXMgS2V5W10gPT4gISFlKVxuICAgIC5tYXAoKGUpID0+IG5ldyBDaG9yZChlKSlcbiAgICAuZmxhdE1hcCgoY2hvcmQpID0+IHtcbiAgICAgIGlmIChjYW5HZW1pbmF0ZSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHsgY2hvcmQsIGhpcmFnYW5hIH0sXG4gICAgICAgICAgeyBjaG9yZDogY2hvcmQud2l0aChcInNwYWNlXCIpLCBoaXJhZ2FuYTogXCJcdTMwNjNcIiArIGhpcmFnYW5hIH0sXG4gICAgICAgIF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW3sgY2hvcmQsIGhpcmFnYW5hIH1dO1xuICAgICAgfVxuICAgIH0pXG4pO1xuXG5leHBvcnQgY2xhc3MgSGlyYWdhbmFDaG9yZE1hcCBpbXBsZW1lbnRzIENob3JkTWFwIHtcbiAgbWFwKGNob3JkOiBDaG9yZCkge1xuICAgIGNvbnN0IG1hcHBpbmcgPSBmaW5kTWFwcGluZyhjaG9yZCk7XG4gICAgaWYgKCFtYXBwaW5nKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFwcGluZy5oaXJhZ2FuYTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kTWFwcGluZyhjaG9yZDogQ2hvcmQpIHtcbiAgcmV0dXJuIG1hcHBpbmdzLmZpbmQoKGUpID0+IGUuY2hvcmQuZXF1YWxzKGNob3JkKSk7XG59XG4iLCAiaW1wb3J0IHsgQ2hvcmQgfSBmcm9tIFwiLi9DaG9yZFwiO1xuaW1wb3J0IHsgQ2hvcmRNYXAgfSBmcm9tIFwiLi9DaG9yZE1hcFwiO1xuaW1wb3J0IHsgSGlyYWdhbmFDaG9yZE1hcCB9IGZyb20gXCIuL0hpcmFnYW5hQ2hvcmRNYXBcIjtcblxuY29uc3QgaGlyYWdhbmFDaG9yZE1hcCA9IG5ldyBIaXJhZ2FuYUNob3JkTWFwKCk7XG5cbmV4cG9ydCBjbGFzcyBLYXRha2FuYUNob3JkTWFwIGltcGxlbWVudHMgQ2hvcmRNYXAge1xuICBtYXAoY2hvcmQ6IENob3JkKSB7XG4gICAgcmV0dXJuIGNvbnZlcnRIaXJhZ2FuYVRvS2F0YWthbmEoaGlyYWdhbmFDaG9yZE1hcC5tYXAoY2hvcmQpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0SGlyYWdhbmFUb0thdGFrYW5hKGhpcmFnYW5hOiBzdHJpbmcpIHtcbiAgcmV0dXJuIFsuLi5oaXJhZ2FuYV1cbiAgICAubWFwKChlKSA9PiB7XG4gICAgICBjb25zdCBjb2RlUG9pbnQgPSBlLmNvZGVQb2ludEF0KDApID8/IDA7XG4gICAgICBpZiAoMHgzMDQxIDw9IGNvZGVQb2ludCAmJiBjb2RlUG9pbnQgPD0gMHgzMDk2KSB7XG4gICAgICAgIHJldHVybiBjb2RlUG9pbnQgKyAweDYwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvZGVQb2ludDtcbiAgICB9KVxuICAgIC5tYXAoKGUpID0+IFN0cmluZy5mcm9tQ29kZVBvaW50KGUpKVxuICAgIC5qb2luKFwiXCIpO1xufVxuIiwgImltcG9ydCB7IEtleUxvZyB9IGZyb20gXCIuL0tleUxvZ1wiO1xuXG5leHBvcnQgY2xhc3MgS2V5TG9nZ2VyIHtcbiAgcmVhZG9ubHkgbG9nczogS2V5TG9nW10gPSBbXTtcblxuICBsb2cobG9nOiBLZXlMb2cpIHtcbiAgICB0aGlzLmxvZ3MucHVzaChsb2cpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSBcIi4vY29udHJvbGxlci9FZGl0b3JcIjtcbmltcG9ydCB7IExvZ0V4cG9ydGVyIH0gZnJvbSBcIi4vY29udHJvbGxlci9Mb2dFeHBvcnRlclwiO1xuaW1wb3J0IHsgQ2hvcmRlciB9IGZyb20gXCIuL2RvbWFpbi9jaG9yZC9DaG9yZGVyXCI7XG5pbXBvcnQgeyBIaXJhZ2FuYUNob3JkTWFwIH0gZnJvbSBcIi4vZG9tYWluL2Nob3JkL0hpcmFnYW5hQ2hvcmRNYXBcIjtcbmltcG9ydCB7IEthdGFrYW5hQ2hvcmRNYXAgfSBmcm9tIFwiLi9kb21haW4vY2hvcmQvS2F0YWthbmFDaG9yZE1hcFwiO1xuaW1wb3J0IHsgS2V5TG9nZ2VyIH0gZnJvbSBcIi4vZG9tYWluL2tleS9LZXlMb2dnZXJcIjtcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRvclwiKTtcbiAgY29uc3QgbW9kZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kZVwiKTtcbiAgY29uc3QgZXhwb3J0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNleHBvcnRcIik7XG4gIGlmIChcbiAgICAhKFxuICAgICAgdGV4dGFyZWEgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50ICYmXG4gICAgICBtb2RlQnV0dG9uIGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQgJiZcbiAgICAgIGV4cG9ydEJ1dHRvbiBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50XG4gICAgKVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNtYXRjaCBiZXR3ZWVuIGV4cGVjdGVkIGFuZCBhY3R1YWwgZWxlbWVudCB0YWcgbmFtZXNcIik7XG4gIH1cblxuICBjb25zdCBrZXlMb2dnZXIgPSBuZXcgS2V5TG9nZ2VyKCk7XG4gIG5ldyBFZGl0b3IoXG4gICAgdGV4dGFyZWEsXG4gICAgbW9kZUJ1dHRvbixcbiAgICBuZXcgQ2hvcmRlcihuZXcgSGlyYWdhbmFDaG9yZE1hcCgpKSxcbiAgICBuZXcgQ2hvcmRlcihuZXcgS2F0YWthbmFDaG9yZE1hcCgpKSxcbiAgICBrZXlMb2dnZXJcbiAgKTtcbiAgbmV3IExvZ0V4cG9ydGVyKGV4cG9ydEJ1dHRvbiwga2V5TG9nZ2VyLCBuZXcgRGF0ZSgpKTtcbn1cblxubWFpbigpO1xuIl0sCiAgIm1hcHBpbmdzIjogIm1CQWdDTyxTQUFTQSxFQUFpQkMsRUFBK0IsQ0FDOUQsR0FBSUEsRUFBSyxTQUFXLEVBSXBCLFFBQVFBLE9BQ0QsSUFDSCxNQUFPLFlBQ0osSUFDSCxNQUFPLFlBQ0osSUFDSCxNQUFPLGFBQ0osSUFDSCxNQUFPLFNBR1gsR0FBSUEsRUFBSyxNQUFNLFVBQVUsRUFDdkIsT0FBT0EsRUFBSyxZQUFZLEVBRTVCLENBRU8sU0FBU0MsRUFBb0JDLEVBQWdCLENBQ2xELElBQU1DLEVBQWMsQ0FBQyxFQUVyQixRQUFXSCxLQUFRRSxFQUFRLENBQ3pCLElBQU1FLEVBQU1MLEVBQWlCQyxDQUFJLEVBQ2pDLEdBQUksQ0FBQ0ksRUFDSCxPQUVGRCxFQUFLLEtBQUtDLENBQUcsQ0FDZixDQUVBLE9BQU9ELENBQ1QsQ0MzRE8sSUFBTUUsRUFBTixLQUFhLENBR2xCLFlBQ21CQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNqQixDQUxpQixjQUFBSixFQUNBLFlBQUFDLEVBQ0EscUJBQUFDLEVBQ0EscUJBQUFDLEVBQ0EsZUFBQUMsRUFQbkIsS0FBUSxLQUFhLFdBU25CSixFQUFTLGlCQUFpQixVQUFXLEtBQUssY0FBYyxLQUFL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QzlELENBQ0YsRUFFQSxTQUFTQyxFQUEwQkMsRUFBa0IsQ0FDbkQsTUFBTyxDQUFDLEdBQUdBLENBQVEsRUFDaEIsSUFBS0MsR0FBTSxDQWRoQixJQUFBQyxFQWVNLElBQU1DLEdBQVlELEVBQUFELEVBQUUsWUFBWSxDQUFDLElBQWYsS0FBQUMsRUFBb0IsRUFDdEMsTUFBSSxRQUFVQyxHQUFhQSxHQUFhLE1BQy9CQSxFQUFZLEdBRWRBLENBQ1QsQ0FBQyxFQUNBLElBQUtGLEdBQU0sT0FBTyxjQUFjQSxDQUFDLENBQUMsRUFDbEMsS0FBSyxFQUFFLENBQ1osQ0NyQk8sSUFBTUcsRUFBTixLQUFnQixDQUFoQixjQUNMLEtBQVMsS0FBaUIsQ0FBQyxFQUUzQixJQUFJQyxFQUFhLENBQ2YsS0FBSyxLQUFLLEtBQUtBLENBQUcsQ0FDcEIsQ0FDRixFQ0RBLFNBQVNDLEdBQU8sQ0FDZCxJQUFNQyxFQUFXLFNBQVMsY0FBYyxTQUFTLEVBQzNDQyxFQUFhLFNBQVMsY0FBYyxPQUFPLEVBQzNDQyxFQUFlLFNBQVMsY0FBYyxTQUFTLEVBQ3JELEdBQ0UsRUFDRUYsYUFBb0IscUJBQ3BCQyxhQUFzQixtQkFDdEJDLGFBQXdCLG1CQUcxQixNQUFNLElBQUksTUFBTSx3REFBd0QsRUFHMUUsSUFBTUMsRUFBWSxJQUFJQyxFQUN0QixJQUFJQyxFQUNGTCxFQUNBQyxFQUNBLElBQUlLLEVBQVEsSUFBSUMsQ0FBa0IsRUFDbEMsSUFBSUQsRUFBUSxJQUFJRSxDQUFrQixFQUNsQ0wsQ0FDRixFQUNBLElBQUlNLEVBQVlQLEVBQWNDLEVBQVcsSUFBSSxJQUFNLENBQ3JELENBRUFKLEVBQUsiLAogICJuYW1lcyI6IFsiY29udmVydENoYXJUb0tleSIsICJjaGFyIiwgImNvbnZlcnRTdHJpbmdUb0tleXMiLCAic3RyaW5nIiwgImtleXMiLCAia2V5IiwgIkVkaXRvciIsICJ0ZXh0YXJlYSIsICJidXR0b24iLCAiaGlyYWdhbmFDaG9yZGVyIiwgImthdGFrYW5hQ2hvcmRlciIsICJrZXlMb2dnZXIiLCAiZSIsICJldmVudCIsICJrZXkiLCAiY29udmVydEtleWJvYXJkRXZlbnRUb0tleSIsICJoaXJhZ2FuYSIsICJrYXRha2FuYSIsICJ0ZXh0IiwgInNlbGVjdGlvblN0YXJ0IiwgInNlbGVjdGlvbkVuZCIsICJzZWxlY3Rpb25Qb3NpdGlvbiIsICJtb2RlIiwgImNvbnZlcnRNb2RlVG9TeW1ib2wiLCAiY29udmVydENoYXJUb0tleSIsICJMb2dFeHBvcnRlciIsICJleHBvcnRCdXR0b24iLCAia2V5TG9nZ2VyIiwgImFwcFN0YXJ0VGltZSIsICJkb3dubG9hZFN0cmluZ0FzRmlsZSIsICJsb2dzIiwgInJvd3MiLCAiaSIsICJsb2ciLCAidGltZSIsICJtaW1lVHlwZSIsICJmaWxlbmFtZSIsICJjb250ZW50IiwgImEiLCAiQ2hvcmQiLCAia2V5cyIsICJkZWR1cGUiLCAiY2hvcmQiLCAia2V5IiwgInJlc3VsdCIsICJDaG9yZGVyIiwgIm1hcCIsICJrZXkiLCAiXyIsICJzdGF0ZSIsICJjaG9yZCIsICJjb252ZXJ0S2V5U3RhdGVzVG9DaG9yZCIsICJrZXlTdGF0ZXMiLCAiQ2hvcmQiLCAibWFwcGluZ3MiLCAiSGlyYWdhbmFDaG9yZE1hcF9kZWZhdWx0IiwgInJvbWFqaXMiLCAiaGlyYWdhbmEiLCAiY2FuR2VtaW5hdGUiLCAiZSIsICJjb252ZXJ0U3RyaW5nVG9LZXlzIiwgIkNob3JkIiwgImNob3JkIiwgIkhpcmFnYW5hQ2hvcmRNYXAiLCAibWFwcGluZyIsICJmaW5kTWFwcGluZyIsICJoaXJhZ2FuYUNob3JkTWFwIiwgIkhpcmFnYW5hQ2hvcmRNYXAiLCAiS2F0YWthbmFDaG9yZE1hcCIsICJjaG9yZCIsICJjb252ZXJ0SGlyYWdhbmFUb0thdGFrYW5hIiwgImhpcmFnYW5hIiwgImUiLCAiX2EiLCAiY29kZVBvaW50IiwgIktleUxvZ2dlciIsICJsb2ciLCAibWFpbiIsICJ0ZXh0YXJlYSIsICJtb2RlQnV0dG9uIiwgImV4cG9ydEJ1dHRvbiIsICJrZXlMb2dnZXIiLCAiS2V5TG9nZ2VyIiwgIkVkaXRvciIsICJDaG9yZGVyIiwgIkhpcmFnYW5hQ2hvcmRNYXAiLCAiS2F0YWthbmFDaG9yZE1hcCIsICJMb2dFeHBvcnRlciJdCn0K
